# Cockpit æŒ‡ä»¤æç¤ºçµ‚ç«¯æ©Ÿæ’ä»¶

æœ¬å°ˆæ¡ˆåŸºæ–¼ Cockpit Starter Kitï¼ˆReact + TypeScript + PatternFlyï¼‰æ¶æ§‹ï¼Œå¯¦ç¾äº†ä¸€å€‹æ•™å­¸çµ‚ç«¯æ©Ÿæ’ä»¶ï¼Œæ—¨åœ¨æä¾›ä¸€å€‹å®‰å…¨çš„ä»‹é¢ï¼Œè®“ä½¿ç”¨è€…å¯ä»¥åŸ·è¡Œ Linux æŒ‡ä»¤ï¼Œä¸¦æŸ¥çœ‹è©²æŒ‡ä»¤çš„å±éšªåº¦ã€è©³ç´°èªªæ˜å’Œç¯„ä¾‹ã€‚

## å°ˆæ¡ˆç‰¹è‰²

- ğŸ¯ **åˆå­¸è€…å‹å–„**ï¼šæä¾›å¸¸ç”¨æŒ‡ä»¤æŒ‰éˆ•ï¼Œé»æ“Šå³å¯å¡«å…¥æŒ‡ä»¤
- ğŸ“š **è©³ç´°èªªæ˜**ï¼šæ¯å€‹æŒ‡ä»¤éƒ½æœ‰è¡¨æ ¼æ ¼å¼çš„è©³ç´°ç”¨æ³•èªªæ˜
- âš ï¸ **å±éšªåº¦æç¤º**ï¼šæ¸…æ¥šæ¨™ç¤ºæŒ‡ä»¤çš„å±éšªç­‰ç´šï¼ˆä½/ä¸­/é«˜ï¼‰
- ğŸ” **åˆ†é¡ç€è¦½**ï¼šæŒ‡ä»¤æŒ‰åŠŸèƒ½åˆ†é¡ï¼ˆæŸ¥è©¢/ç€è¦½ã€æª”æ¡ˆæ“ä½œã€æ¬Šé™è¨­å®šã€ç³»çµ±æ“ä½œã€ç¶²è·¯æ“ä½œï¼‰
- ğŸ’¡ **å³æ™‚æç¤º**ï¼šæ»‘é¼ æ‡¸åœå³å¯æŸ¥çœ‹æŒ‡ä»¤èªªæ˜
- âŒ¨ï¸ **å‘½ä»¤æ­·å²**ï¼šæ”¯æ´ä¸Šä¸‹éµç€è¦½æ­·å²æŒ‡ä»¤
- ğŸ”„ **Tab è£œé½Š**ï¼šæ”¯æ´æŒ‡ä»¤è‡ªå‹•è£œé½ŠåŠŸèƒ½

## å°ˆæ¡ˆçµæ§‹

| æª”æ¡ˆ/ç›®éŒ„ | èªªæ˜ |
|---------|------|
| `src/app.tsx` | **æ ¸å¿ƒæ‡‰ç”¨ç¨‹å¼**ï¼šåŒ…å«æ‰€æœ‰ React çµ„ä»¶ã€ç‹€æ…‹ç®¡ç†ã€æŒ‡ä»¤è³‡æ–™åº«ã€PatternFly ä½ˆå±€å’Œ cockpit.spawn åŸ·è¡Œé‚è¼¯ |
| `src/index.html` | HTML éª¨æ¶ï¼Œè² è²¬è¼‰å…¥ cockpit.js å’Œç·¨è­¯å¾Œçš„ index.js |
| `src/index.tsx` | React å•Ÿå‹•å™¨ï¼Œå°‡ Application çµ„ä»¶æ³¨å…¥ HTML å®¹å™¨ |
| `src/manifest.json` | Cockpit æ’ä»¶å®šç¾©æª”ï¼Œå®šç¾©æ’ä»¶ ID å’Œå…¥å£é» |
| `manifest.json` | æ ¹ç›®éŒ„çš„ manifest.jsonï¼ˆç·¨è­¯æ™‚éœ€è¦ï¼‰ |
| `dist/` | ç·¨è­¯å¾Œçš„è¼¸å‡ºç›®éŒ„ï¼ˆè‡ªå‹•ç”Ÿæˆï¼Œå·²åŠ å…¥ .gitignoreï¼‰ |

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å‰ææ¢ä»¶

è«‹ç¢ºä¿æ‚¨çš„ç³»çµ±å·²å®‰è£ä»¥ä¸‹å·¥å…·ï¼š

- **Node.js (v18+)** èˆ‡ **npm**
- **git**
- **make**

### å®‰è£æ­¥é©Ÿ

#### 1. å…‹éš†å°ˆæ¡ˆ

```bash
git clone https://github.com/tsai0120/linuxFinal_TeachingTerminal.git
cd linuxFinal_TeachingTerminal
```

#### 2. å®‰è£ç›¸ä¾å¥—ä»¶

```bash
npm install
```

#### 3. ç·¨è­¯å°ˆæ¡ˆ

**é‡è¦ï¼š** åœ¨åŸ·è¡Œ `make` ä¹‹å‰ï¼Œå¿…é ˆå…ˆå°‡ `src/manifest.json` è¤‡è£½åˆ°æ ¹ç›®éŒ„ï¼š

```bash
cp src/manifest.json ./
make
```

é€™æœƒå°‡ `src/` ä¸­çš„ React/TypeScript ç¨‹å¼ç¢¼ç·¨è­¯æˆç€è¦½å™¨å¯è®€çš„å–®ä¸€ JavaScript æª”æ¡ˆï¼Œä¸¦è¼¸å‡ºåˆ° `dist/` ç›®éŒ„ã€‚

#### 4. éƒ¨ç½²åˆ° Cockpit

å»ºç«‹ Cockpit æ’ä»¶ç›®éŒ„ä¸¦å»ºç«‹ç¬¦è™Ÿé€£çµï¼š

```bash
mkdir -p ~/.local/share/cockpit
ln -s $(pwd)/dist ~/.local/share/cockpit/teach-terminal
```

#### 5. é‡æ–°å•Ÿå‹•æœå‹™ä¸¦æ¸¬è©¦

```bash
# æ¸…é™¤å¿«å–
sudo rm -rf /var/cache/cockpit/*

# é‡æ–°å•Ÿå‹• Cockpit æœå‹™
sudo systemctl restart cockpit cockpit.socket
```

ç„¶å¾Œåœ¨ç€è¦½å™¨ä¸­ç™»å…¥ Cockpit ä»‹é¢ï¼Œåœ¨å·¦å´é¸å–®ä¸­æ‰¾åˆ° **"æŒ‡ä»¤æç¤ºçµ‚ç«¯æ©Ÿ"** é …ç›®ã€‚

## ğŸ’¡ é–‹ç™¼æŒ‡å—

### æ–°å¢æŒ‡ä»¤

è‹¥è¦æ–°å¢æŒ‡ä»¤ï¼Œè«‹ç·¨è¼¯ `src/app.tsx` ä¸­çš„ `commandInfo` ç‰©ä»¶ï¼š

```typescript
const commandInfo: Record<string, {
  template: string;
  text: string;
  detail: string | React.ReactNode;
  danger: "low" | "medium" | "high";
  category: string;
}> = {
  your_command: {
    template: "your_command --option",
    text: "your_commandï¼šæŒ‡ä»¤èªªæ˜ã€‚",
    detail: (
      <div>
        <p><strong>åŸºæœ¬ç”¨æ³•ï¼š</strong></p>
        <table style={{ /* è¡¨æ ¼æ¨£å¼ */ }}>
          {/* è¡¨æ ¼å…§å®¹ */}
        </table>
      </div>
    ),
    danger: "low",
    category: "æŸ¥è©¢/ç€è¦½ (Query)",
  },
};
```

### é–‹ç™¼æ¨¡å¼

ä½¿ç”¨ watch æ¨¡å¼å¯ä»¥è‡ªå‹•é‡æ–°ç·¨è­¯ï¼š

```bash
    make watch
```

æˆ–ä½¿ç”¨ build.jsï¼š

```bash
./build.js -w
```

ä¿®æ”¹ç¨‹å¼ç¢¼å¾Œï¼Œé‡æ–°è¼‰å…¥ç€è¦½å™¨é é¢å³å¯çœ‹åˆ°è®Šæ›´ã€‚

### ç¨‹å¼ç¢¼æª¢æŸ¥

åŸ·è¡Œ ESLint æª¢æŸ¥ï¼š

```bash
    npm run eslint
```

è‡ªå‹•ä¿®å¾©å¯ä¿®å¾©çš„å•é¡Œï¼š

```bash
npm run eslint:fix
```

## ğŸ“‹ åŠŸèƒ½èªªæ˜

### æŒ‡ä»¤åˆ†é¡

- **æŸ¥è©¢/ç€è¦½ (Query)**ï¼š`ls`, `pwd`, `cat`, `find`, `grep`, `head`, `tail`
- **æª”æ¡ˆæ“ä½œ (File Operations)**ï¼š`cp`, `mv`, `mkdir`, `rmdir`, `touch`
- **æ¬Šé™è¨­å®š (Permission)**ï¼š`chmod`, `chown`, `umask`
- **ç³»çµ±æ“ä½œ (System Control)**ï¼š`rm`, `systemctl`, `ps`, `kill`, `top`
- **ç¶²è·¯æ“ä½œ (Network)**ï¼š`ping`, `curl`, `wget`, `netstat`

### ä½¿ç”¨æŠ€å·§

- **æŒ‡ä»¤æŒ‰éˆ•**ï¼šé»æ“ŠæŒ‰éˆ•æœƒå°‡æŒ‡ä»¤å¡«å…¥è¼¸å…¥æ¡†ï¼Œéœ€æ‰‹å‹•é»æ“Šã€ŒåŸ·è¡Œã€æˆ–æŒ‰ `Enter` æ‰æœƒåŸ·è¡Œ
- **ä¸Šä¸‹éµ**ï¼šåœ¨è¼¸å…¥æ¡†ä¸­æŒ‰ä¸Šä¸‹éµå¯ä»¥ç€è¦½æ­·å²æŒ‡ä»¤
- **Tab éµ**ï¼šæŒ‰ Tab éµå¯ä»¥è‡ªå‹•è£œé½ŠæŒ‡ä»¤
- **Tooltip**ï¼šæ»‘é¼ æ‡¸åœåœ¨æŒ‰éˆ•æˆ–ã€ŒåŸ·è¡Œã€æŒ‰éˆ•ä¸Šå¯æŸ¥çœ‹è©³ç´°èªªæ˜

## ğŸ”§ æ•…éšœæ’é™¤

### ç·¨è­¯å¤±æ•—

å¦‚æœç·¨è­¯æ™‚å‡ºç¾ `Unterminated string literal` éŒ¯èª¤ï¼Œè«‹æª¢æŸ¥ `src/app.tsx` ä¸­æ˜¯å¦æœ‰æœªçµæŸçš„å­—ä¸²ã€‚

### æ’ä»¶æœªé¡¯ç¤º

1. ç¢ºèªå·²åŸ·è¡Œ `cp src/manifest.json ./` å†åŸ·è¡Œ `make`
2. ç¢ºèªç¬¦è™Ÿé€£çµå·²æ­£ç¢ºå»ºç«‹
3. æ¸…é™¤ Cockpit å¿«å–ä¸¦é‡æ–°å•Ÿå‹•æœå‹™
4. æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°æ˜¯å¦æœ‰éŒ¯èª¤è¨Šæ¯

### æŒ‡ä»¤åŸ·è¡Œå¤±æ•—

- ç¢ºèª Cockpit æœå‹™æ­£å¸¸é‹è¡Œ
- æª¢æŸ¥ä½¿ç”¨è€…æ¬Šé™
- æŸ¥çœ‹çµ‚ç«¯æ©Ÿè¦–çª—çš„éŒ¯èª¤è¨Šæ¯

## ğŸ“ æ³¨æ„äº‹é …

- **ä¸è¦ä¿®æ”¹** `src/index.html` å’Œ `src/index.tsx`ï¼Œé€™äº›æ˜¯æ‡‰ç”¨ç¨‹å¼çš„å•Ÿå‹•å™¨
- **æ‰€æœ‰åŠŸèƒ½é–‹ç™¼**è«‹åœ¨ `src/app.tsx` ä¸­é€²è¡Œ
- **æ¯æ¬¡ç·¨è­¯å‰**è¨˜å¾—åŸ·è¡Œ `cp src/manifest.json ./`
- `dist/` ç›®éŒ„æ˜¯ç·¨è­¯è¼¸å‡ºï¼Œä¸éœ€è¦æäº¤åˆ° git

## ğŸ“„ æˆæ¬Š

æœ¬å°ˆæ¡ˆåŸºæ–¼ Cockpit Starter Kitï¼Œéµå¾ªç›¸åŒçš„æˆæ¬Šæ¢æ¬¾ã€‚

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue æˆ– Pull Requestï¼

## ğŸ“š ç›¸é—œè³‡æº

- [Cockpit å®˜æ–¹æ–‡ä»¶](https://cockpit-project.org/guide/latest/)
- [PatternFly React æ–‡ä»¶](https://www.patternfly.org/v4/)
- [Cockpit Starter Kit](https://github.com/cockpit-project/starter-kit)
